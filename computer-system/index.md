# 计算机系统结构

## 推荐书籍
- 深入计算机系统

## 计算机组成
- CPU
- 内存
- 主板
- IO

## CPU
CPU的组成包含:
- PC(Program counter): 程序计数器：计算机中的一个寄存器，用于存储处理器当前（或下一条）指令的地址
- Registers: 寄存器可以有多个，暂时存储CPU计算需要用到的数据
- ALU: 运来做计算
- CACHE:
- CU: 控制单元
- MMU: (Memory Manage Unit)内存管理单元

## 内存
操作系统将应用程序代码加载到内存中。

## 指令集架构（ISA）
x86 架构: 采用复杂指令集计算机（CISC）设计
ARM 架构: 精简指令集计算机（RISC）架构
MIPS 架构：也是一种 RISC 架构

指令集架构根据复杂度可分为: 复杂指令集计算机（CISC） 与 精简指令集计算机（RISC）


## 零散知识点

多核 CPU 通常采用对称多处理（SMP）或非对称多处理（AMP）架构，其中每个核心都有自己的缓存、寄存器和执行单元

CPU的增加会导致对主内存的读写存在冲突

多个 CPU 对内存读写的的并发控制

四核指的是什么？

进程：操作系统将应用程序代码加载到内存中，并分配一块内存，同时产生一个主线程。进程间是相互隔离的

线程：共享进程中的资源，同一个时间段内，只有一个线程放到CPU中运行，线程的切换，保留上一个线程上下文，
一个 CPU 一般对应一个线程，一个线程在一个CPU中运行。线程是由操作系统产生的。

在计算机中，我们把一个任务称为一个进程,某些进程内部还需要同时执行多个子任务,我们把子任务称为线程
进程和线程的关系就是：一个进程可以包含一个或多个线程，但至少会有一个线程。
单核CPU: 单核CPU的线程是交替执行的
多核CPU，因为通常任务的数量远远多于CPU的核数，所以任务也是交替执行的

创建进程比创建线程开销大，尤其是在Windows系统上；
进程间通信比线程间通信要慢，因为线程间通信就是读写同一个变量，速度很快
多进程稳定性比多线程高，因为在多进程的情况下，一个进程崩溃不会影响其他进程，而在多线程的情况下，任何一个线程崩溃会直接导致整个进程崩溃。

程序：是放在磁盘上的代码
进程：是运行中的程序

进程隔离：引入虚拟内存的概念
线程：一个进程中可以并线执行多个线程

操作系统连接计算机硬件和软件


## Reference
- [廖雪峰：进程和线程](https://www.liaoxuefeng.com/wiki/1252599548343744/1304521607217185)
- [计算机组成原理](https://0xinfection.github.io/reversing/pages/part-1-goals.html)
- [CPU 工作流程](https://cpu.land/)
- [使用 c 语言实现简易操作系统](https://operating-system-in-1000-lines.vercel.app/zh/02-assembly)

